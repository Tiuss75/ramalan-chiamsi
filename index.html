<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramalan Chiam Si - PWA</title>
    <meta name="theme-color" content="#9c1c26">
    <link rel="manifest" href="manifest.json" crossorigin="use-credentials">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="favicon-512.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="text/javascript"
        src="https://app.midtrans.com/snap/snap.js" 
        data-client-key="SB-Mid-client-hCnSsq93YoH_kXLO"></script> 
        <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Inter:wght@400;600;700&display=swap');
        :root {
            --primary-red: #9c1c26;
            --dark-red: #7a0a14;
            --gold: #d4af37;
            --light-gold: #f8ecc2;
            --dark-gold: #b8860b;
            --black: #2c2416;
            --white: #f8f4e9;
            --font-main: 'Inter', sans-serif;
            --font-display: 'Noto Serif SC', serif;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-main);
            background-color: var(--primary-red);
            background-image: linear-gradient(135deg, rgba(122,10,20,.8), rgba(28,5,7,.9));
            color: var(--white);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(44,36,22,.85);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,.6);
            border: 3px solid var(--gold);
            backdrop-filter: blur(5px);
        }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--gold);
            text-shadow: 0 3px 5px rgba(0,0,0,.7);
            cursor: pointer;
            user-select: none;
        }
        .menu { display: flex; justify-content: center; margin-bottom: 20px; }
        .menu .btn {
            background-color: var(--dark-gold);
            color: var(--black);
            font-size: 1rem;
            padding: 10px 20px;
        }
        .step {
            background: rgba(122,10,20,.6);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid var(--dark-gold);
        }
        .step-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            color: var(--gold);
        }
        .step-title i {
            font-size: 1.5rem;
            width: 40px; height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--black);
            border: 2px solid var(--gold);
        }
        .step-title h2 { font-size: 1.5rem; }
        .name-input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: 2px solid var(--dark-gold);
            background-color: var(--light-gold);
            color: var(--black);
            font-size: 1.1rem;
        }
        .ciamsi-shaker-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 220px;
            position: relative;
            margin: 20px 0;
        }
        .ciamsi-container { width: 100px; height: 180px; position: relative; }
        .ciamsi-body {
            width: 100%; height: 100%;
            background: linear-gradient(145deg, #6d1a21, #a8323c);
            border-radius: 15px 15px 10px 10px;
            border: 4px solid #501015;
            box-shadow: inset 0 0 15px rgba(0,0,0,.5), 0 10px 20px rgba(0,0,0,.4);
            position: absolute;
            bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .ciamsi-logo {
            font-family: var(--font-display);
            font-size: 50px;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(212,175,55,.5);
        }
        .falling-stick {
            width: 8px; height: 130px;
            background: linear-gradient(#deb887, #b8860b);
            border: 1px solid #8B4513;
            border-radius: 5px;
            position: absolute;
            bottom: 180px;
            opacity: 0;
            transform-origin: bottom center;
        }
        .shake-animation { animation: container-shake .8s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes container-shake {
            10%,90%{transform:translate3d(-1px,0,0) rotate(-1deg)}
            20%,80%{transform:translate3d(2px,0,0) rotate(2deg)}
            30%,50%,70%{transform:translate3d(-4px,0,0) rotate(-4deg)}
            40%,60%{transform:translate3d(4px,0,0) rotate(4deg)}
        }
        .fall-animation { animation: stick-fall 1s forwards ease-in; }
        @keyframes stick-fall {
            0%{opacity:1;transform:translateY(-180px) translateX(20px) rotate(0)}
            100%{opacity:1;transform:translateY(220px) translateX(70px) rotate(110deg)}
        }
        .puak-poi-container { display: flex; justify-content: center; gap: 40px; margin: 30px 0; }
        .puak-poi {
            width: 70px; height: 35px;
            background: #d2b48c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--black);
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0,0,0,.3);
        }
        .throw-animation { animation: throw .8s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes throw {
            0%{transform:translateY(0) rotate(0)}
            30%{transform:translateY(-80px) rotate(180deg)}
            70%{transform:translateY(40px) rotate(360deg)}
            100%{transform:translateY(0) rotate(720deg)}
        }
        .btn {
            background: var(--gold);
            color: var(--black);
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all .3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,.3);
            text-decoration: none;
        }
        .btn:hover { background: var(--light-gold); transform: translateY(-3px); }
        .btn:disabled {
            background: #777;
            color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .prediction-card {
            background: var(--white);
            color: var(--black);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 3px solid var(--gold);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gold);
        }
        .card-title { font-size: 1.5rem; color: var(--primary-red); font-weight: 700; }
        .card-number {
            background: var(--gold);
            color: var(--black);
            width: 50px; height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
        }
        .prediction-section { margin-bottom: 15px; }
        .prediction-section h3 {
            font-family: var(--font-display);
            color: var(--dark-red);
            margin-bottom: 8px;
            border-bottom: 1px solid var(--light-gold);
            padding-bottom: 5px;
        }
        .prediction-section p, .prediction-section ul { white-space: pre-wrap; line-height: 1.6; }
        .pedoman-jawaban ul { list-style: none; padding-left: 0; }
        .pedoman-jawaban li { margin-bottom: 5px; }
        .action-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .whatsapp-share { background: #25D366; color: #fff; }
        .whatsapp-share:hover { background: #128c7e; }
        .download-btn { background-color: var(--dark-red); color: var(--white); }
        .hidden { display: none !important; }
        .admin-section, .popup-overlay {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,.7);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        .admin-form, .popup-content {
            background: var(--white);
            color: var(--black);
            padding: 30px;
            border-radius: 15px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 0 20px rgba(0,0,0,.5);
            text-align: left;
        }
        .popup-content-legal { max-height: 80vh; overflow-y: auto; }
        .admin-form h2, .popup-content h2 { color: var(--dark-red); margin-bottom: 20px; text-align: center; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .popup-content p { margin-bottom: 20px; text-align: center; line-height: 1.5; }
        .popup-buttons { display: flex; justify-content: center; gap: 15px; flex-direction: column; }
        .package-option {
            border: 2px solid var(--gold);
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            background: rgba(212,175,55,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        .package-option:hover { background: rgba(212,175,55,0.2); transform: translateY(-2px); }
        .package-option h4 { margin: 0 0 5px 0; color: var(--dark-red); font-weight: 700; }
        .package-option p { margin: 5px 0 0 0; font-size: 0.95rem; color: var(--black); font-weight: 600; }
        footer {
            text-align: center;
            color: rgba(255,255,255,.7);
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid var(--dark-gold);
        }
        footer a { color: var(--light-gold); margin: 0 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="appContainer" class="container">
        <div class="menu">
            <button id="goToPayment" class="btn"><i class="fas fa-crown"></i> Upgrade Sekarang</button>
        </div>
        <div class="header">
            <h1>Ramalan Chiam Si</h1>
            <p>Petunjuk ilahi untuk langkah hidup Anda</p>
        </div>
        <div class="step">
            <div class="step-title"><i class="fas fa-user"></i><h2>Data Diri</h2></div>
            <input type="text" id="nameInput" placeholder="Ketik nama Anda..." class="name-input">
        </div>
        <div class="step">
            <div class="step-title"><i class="fas fa-praying-hands"></i><h2>Kocok Tabung</h2></div>
            <p>Fokuskan pikiran, lalu kocok tabung untuk mendapat nomor ramalan.</p>
            <div class="ciamsi-shaker-container">
                <div class="ciamsi-container" id="ciamsiContainer"><div class="ciamsi-body"><div class="ciamsi-logo">ç°½</div></div></div>
                <div class="falling-stick" id="fallingStick"></div>
            </div>
            <div style="text-align: center;"><button id="shakeBtn" class="btn" disabled><i class="fas fa-hand-point-right"></i> Kocok</button></div>
            <div class="result-container hidden" id="shakeResult" style="text-align:center; margin-top:15px;">
                <p>Anda mendapatkan nomor ramalan:</p>
                <div class="result-number" id="predictionNumber" style="font-size: 2rem; font-weight: bold; color: var(--gold);">-</div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><i class="fas fa-moon"></i><h2>Lempar Puak Poi</h2></div>
            <p>Lemparkan Puak Poi untuk memohon restu dewa.</p>
            <div class="puak-poi-container">
                <div class="puak-poi" id="puakpoi1">-</div>
                <div class="puak-poi" id="puakpoi2">-</div>
            </div>
            <div class="throw-counter" style="text-align:center; margin-bottom:15px;">Lemparan ke: <span id="throwCount">0</span>/3</div>
            <div style="text-align: center;"><button id="throwBtn" class="btn" disabled><i class="fas fa-hand-point-right"></i> Lempar</button></div>
            <div class="result-container hidden" id="throwResult" style="text-align:center; margin-top:15px;"><p id="throwResultText">Hasil lemparan: -</p></div>
        </div>
        <div class="hidden" id="predictionResult">
            <div class="prediction-card" id="predictionCard">
                <div class="card-header">
                    <div class="card-title">Hasil Ramalan</div>
                    <div class="card-number" id="resultNumber">-</div>
                </div>
                <div class="prediction-section"><h3>Makna Lambang</h3><p id="sinthioText">-</p></div>
                <div class="prediction-section"><h3>Bunyi Syair</h3><p id="syairText">-</p></div>
                <div class="prediction-section"><h3>Selayang Pandang</h3><p id="selayangPandangText">-</p></div>
                <div class="prediction-section pedoman-jawaban"><h3>Pedoman Jawaban</h3><ul id="pedomanList"></ul></div>
            </div>
            <div class="action-buttons">
                <a href="#" class="btn whatsapp-share" id="whatsappShare"><i class="fab fa-whatsapp"></i> Bagikan</a>
                <button class="btn download-btn" id="downloadBtn"><i class="fas fa-download"></i> Unduh</button>
            </div>
        </div>
    </div>
    <div id="adminLoginSection" class="admin-section hidden">
        <div class="admin-form">
            <h2>Login Admin</h2>
            <div class="form-group"><label for="adminEmail">Email</label><input type="email" id="adminEmail" placeholder="admin@example.com"></div>
            <div class="form-group"><label for="adminPassword">Password</label><input type="password" id="adminPassword" placeholder="******"></div>
            <button id="loginBtn" class="btn" style="width: 100%;">Login</button>
        </div>
    </div>
    <div id="adminCmsSection" class="container hidden" style="margin-top: 20px;">
        <h2>CMS Ramalan Chiam Si <button id="logoutBtn" class="btn" style="float: right;">Logout</button></h2>
        <div class="form-group"><label for="ramalanNumberSelect">Pilih Nomor Ramalan</label><select id="ramalanNumberSelect"></select></div>
        <div class="form-group"><label for="sinthioInput">Makna Lambang</label><textarea id="sinthioInput"></textarea></div>
        <div class="form-group"><label for="syairInput">Bunyi Syair</label><textarea id="syairInput"></textarea></div>
        <div class="form-group"><label for="selayangPandangInput">Selayang Pandang</label><textarea id="selayangPandangInput"></textarea></div>
        <div class="form-group">
            <label for="pedomanInput">Pedoman Jawaban (satu per baris)</label>
            <textarea id="pedomanInput" placeholder="PERDAGANGAN BERJALAN BIASA&#10;MENCARI HARTA BANYAK KOSONG"></textarea>
        </div>
        <button id="saveBtn" class="btn" style="width: 100%;">Simpan Perubahan</button>
    </div>
    <div id="loginPopup" class="popup-overlay hidden">
        <div class="popup-content">
            <h2>Login untuk Lanjut</h2>
            <p>Untuk menyimpan status premium Anda secara permanen, silakan login dengan akun Google.</p>
            <div class="popup-buttons">
                <button id="googleLoginBtn" class="btn" style="background-color: #4285F4; color: white; width: 100%;"><i class="fab fa-google"></i> Login dengan Google</button>
                <button id="cancelLoginBtn" class="btn" style="background-color: var(--dark-red); color: var(--white); width: 100%;">Batal</button>
            </div>
        </div>
    </div>
    <div id="paymentPopup" class="popup-overlay hidden">
        <div class="popup-content" style="max-width: 600px;">
            <h2>Upgrade ke Premium</h2>
            <p>Pilih paket untuk melanjutkan ramalan tanpa batas:</p>
            <div class="package-option" data-attempts="5" data-price="25000">
                <h4>ðŸŽ¯ Paket 5 Kali Kocok</h4>
                <p><strong>Harga: Rp 25.000</strong></p><p>Cocok untuk penggunaan sekali waktu.</p>
            </div>
            <div class="package-option" data-attempts="12" data-price="50000">
                <h4>ðŸš€ Paket 12 Kali Kocok</h4>
                <p><strong>Harga: Rp 50.000</strong></p><p>Lebih hemat! Ideal untuk pengguna aktif.</p>
            </div>
            <div class="popup-buttons" style="margin-top: 20px;"><button id="closePaymentPopup" class="btn" style="background-color: var(--dark-red); color: var(--white);">Batal</button></div>
        </div>
    </div>
    <div id="confirmPaymentPopup" class="popup-overlay hidden">
        <div class="popup-content">
            <h2>Proses Pembayaran</h2>
            <p id="confirmText">Anda akan membayar <strong>Rp <span id="priceDisplay">0</span></strong> untuk <span id="attemptsDisplay">0</span> kali kocok tambahan.</p>
            <div class="popup-buttons">
                <button id="confirmRealPayment" class="btn">Lanjut ke Midtrans</button>
                <button id="cancelConfirm" class="btn" style="background-color: var(--dark-red); color: var(--white);">Batal</button>
            </div>
        </div>
    </div>
    <div id="messagePopup" class="popup-overlay hidden">
        <div class="popup-content">
            <h2 id="messageTitle">Pemberitahuan</h2><p id="messageText"></p>
            <div class="popup-buttons"><button id="closeMessageBtn" class="btn">Tutup</button></div>
        </div>
    </div>
    <div id="termsPopup" class="popup-overlay hidden">
        <div class="popup-content popup-content-legal">
            <h2>Syarat & Ketentuan</h2>
            <p style="text-align:left;">Selamat datang di aplikasi Ramalan Chiam Si. Dengan menggunakan aplikasi ini, Anda setuju untuk mematuhi syarat dan ketentuan berikut:</p><h4 style="text-align:left; margin-top:15px;">1. Tujuan Aplikasi</h4><p style="text-align:left;">Aplikasi ini disediakan untuk tujuan hiburan, refleksi diri, dan pelestarian budaya. Hasil yang diberikan tidak boleh dianggap sebagai nasihat profesional (keuangan, hukum, medis, dll.) dan tidak dijamin akurat 100%.</p><h4 style="text-align:left; margin-top:15px;">2. Layanan Berbayar</h4><p style="text-align:left;">Kami menawarkan akses premium berbayar untuk penggunaan tanpa batas. Pembayaran diproses melalui Midtrans. Semua transaksi bersifat final dan tidak dapat dikembalikan (non-refundable) setelah pembayaran berhasil.</p><h4 style="text-align:left; margin-top:15px;">3. Batasan Tanggung Jawab</h4><p style="text-align:left;">Pengembang tidak bertanggung jawab atas keputusan atau tindakan apa pun yang Anda ambil berdasarkan interpretasi dari hasil yang diberikan oleh aplikasi ini.</p>
            <div class="popup-buttons" style="margin-top:20px;"><button class="btn close-popup-btn">Tutup</button></div>
        </div>
    </div>
    <div id="privacyPopup" class="popup-overlay hidden">
        <div class="popup-content popup-content-legal">
            <h2>Kebijakan Privasi</h2>
            <p style="text-align:left;">Kami menghargai privasi Anda. Dokumen ini menjelaskan bagaimana kami mengumpulkan dan menggunakan data Anda.</p><h4 style="text-align:left; margin-top:15px;">1. Data yang Kami Kumpulkan</h4><p style="text-align:left;">Aplikasi ini menggunakan Firebase Anonymous Authentication dan Google Sign-In. Kami mengumpulkan User ID yang dibuat secara otomatis. Kami tidak mengumpulkan data pribadi selain dari profil Google Anda (nama, email, foto profil) saat Anda login.</p><h4 style="text-align:left; margin-top:15px;">2. Penggunaan Data</h4><p style="text-align:left;">User ID digunakan untuk membedakan antara pengguna gratis dan premium, serta untuk melacak status pembelian dan jatah kocokan. Data ini disimpan dengan aman di server Firebase dan tidak akan dibagikan kepada pihak ketiga.</p>
            <div class="popup-buttons" style="margin-top:20px;"><button class="btn close-popup-btn">Tutup</button></div>
        </div>
    </div>
    <footer>
        <p>&copy; 2025 Ramalan Chiam Si. All Rights Reserved.</p>
        <div style="margin-top: 10px;">
            <a id="termsLink">Syarat & Ketentuan</a> | <a id="privacyLink">Kebijakan Privasi</a> | <a href="mailto:ramalanchiamsi@gmail.com">Kontak Kami</a>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
   Auth state changed, user: bLxvu3duJkOxd99kjMKVBqVSDOF2 isAnonymous: true
nr-spa-1.288.1.min.js:1 
        
        
       Failed to load resource: net::ERR_BLOCKED_BY_CLIENT
nr-spa-1.288.1.min.js:1 
        
        
       Failed to load resource: net::ERR_BLOCKED_BY_CLIENT
ramalan-chiamsi/:546 User: bLxvu3duJkOxd99kjMKVBqVSDOF2, isAdmin: false
ramalan-chiamsi/:825 Error saat menautkan akun Google: TypeError: t._linkToIdToken is not a function
    at _link$1 (link_unlink.ts:69:5)
    at async HTMLButtonElement.<anonymous> (ramalan-chiamsi/:808:32)
</body>
</html>
